<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog Post</title>
   
    <link rel="stylesheet" href="post.css">
</head>
<body>

    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">CALVENT</div>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="service.html">Service</a></li>
                <li><a href="blog.html">Blog</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
            <button class="get-started">Get Started</button>
            <div class="hamburger" onclick="toggleMenu()">â˜°</div>
        </div>
        <ul class="mobile-menu" id="mobileMenu">
            <li><a href="index.html">Home</a></li>
            <li><a href="about.html" >About</a></li>
            <li><a href="service.html">Service</a></li>
            <li><a href="blog.html">Blog</a></li>
            <li><a href="contact.html">Contact</a></li>
        </ul>
    </nav>
    
    <div class="container">
        <img id="featured-image" src="" alt="Blog Image">
        <h1 id="blog-title">Loading...</h1>
        <p class="date" id="blog-date"></p>
        <div class="content" id="blog-content"></div>
        <a href="index.html" class="back-button">Back to Blog</a>
    </div>

    <script>
        async function loadBlogPost() {
            const params = new URLSearchParams(window.location.search);
            const slug = params.get("slug");
            if (!slug) {
                document.getElementById("blog-title").innerText = "Blog Not Found";
                return;
            }
            
            const API_URL = `http://calvent-blog/wp-json/wp/v2/posts?slug=${slug}&_embed`;
            try {
                const response = await fetch(API_URL);
                const posts = await response.json();
                if (posts.length === 0) {
                    document.getElementById("blog-title").innerText = "Post Not Found";
                    return;
                }
                const post = posts[0];
                
                document.getElementById("featured-image").src = post._embedded["wp:featuredmedia"] ? post._embedded["wp:featuredmedia"][0].source_url : "default-image.jpg";
                document.getElementById("blog-title").innerText = post.title.rendered;
                document.getElementById("blog-date").innerText = new Date(post.date).toDateString();
                document.getElementById("blog-content").innerHTML = post.content.rendered;
            } catch (error) {
                console.error("Error fetching post:", error);
            }
        }

        window.onload = loadBlogPost;
    </script>

    <script src="post.js"></script>
</body>
</html>
